[
  {
    "objectID": "data/Readme.html",
    "href": "data/Readme.html",
    "title": "Data Folder",
    "section": "",
    "text": "Data Folder\nPlace any data needed by your analysis in this folder. Please do not store large files here. Then read in any data using the ‘data’ path. For example, read_csv(\"data/data.csv\")."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Emergency Services Call Analysis in Buffalo, New York",
    "section": "",
    "text": "Introduction\nEmergency services are essential in times of crisis’s, providing necessary response teams to areas in need with support from Police, Fire, and Medical professionals. Unfortunately high call volumes and low staffing can result in misguided directives and improper handling of sensitive situations. This report will provide further insight on call classification and distribution of mental health related calls within the City of Buffalo, including any potential correlation between median household income. The results of this analysis will assist in understanding the use of Buffalo’s resources and how socio-economic factors can be indicative of … ]\n\n\nMaterials and Methods\nOverview: Import, clean and categorize required data from March and April of 2024 into Mental Health categories. Plot call types and call volumes. Run a regression analysis on specified mental health call types and median income values.\nData required for this analysis: - 911 call data provided by the City of Buffalo Police Department for the months of March and April in 2024. Data can be found at ‘https://figshare.com/articles/dataset/Buffalo_911_Call_March_and_April_2024/30585986?file=59454170’ - Census tract data from ‘https://www.census.gov/data/’ using an API key from 2023, the most recent and compatible dataset. Must include median income data and total populaton data. - Zipcode boundaries from ‘https://data.buffalony.gov/’ using an API key.\nNecessary steps: 1. Import necessary libraries and datasets for use. 2. Clean up imported data and complete pre-processing requirements. 3. Define mental health categories and assign them to the call data. 4. Create a summary table of call types and locations. 5. Plot a bar chart summary of call frequency 6. Map most frequent call types by zipcode 7. Map call volume by zip code 8. Create and run a regression model on call frequency versus median income. 9. Plot regression.\n\nStep 1: Load any required packages & necessary data:\n\n\nCode\n#install.packages(c(\"tigris\", \"sf\"))\n#install.packages(\"tidycensus\", dependencies = TRUE)\n\nlibrary(dplyr)\nlibrary(readr)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(tigris)\nlibrary(tidycensus)\nlibrary(leaflet)\nlibrary(htmltools)\nlibrary(tidyr)\n\n\n\n\nCode\n# Import 911 data CSV from github data folder\ndata_911_url &lt;- \"https://raw.githubusercontent.com/sjdeck/geo511/refs/heads/master/data/mar2apr2024_latlong.csv\"\ndata_911 &lt;- read_csv(data_911_url)\n\n# Import zipcode data from API \nurl_json &lt;- \"https://data.buffalony.gov/resource/qnyw-efar.geojson\"\nzipcode_json &lt;- st_read(url_json, quiet = TRUE)\n\n# Import Census data through API \n# Set API key\ncensus_api_key(\"e12a911e4853b9b6ae9944d643816d70cd2b9b18\", install = FALSE)\nreadRenviron(\"~/.Renviron\") \n\n\n# Download census data\ncensus_data &lt;- get_acs(\n  geography = \"zcta\",                       # use \"zcta\" or \"zip code tabulation area\"\n variables = c(\n    median_income = \"B19013_001\",  \n    total_pop     = \"B01003_001\"),          \n  year = 2023,\n  survey = \"acs5\",\n  geometry = FALSE\n)\n\n\n\n\nStep 2: Clean & Convert data\n\n\nCode\n# Convert to an sf object to \"enable standard spatial data handling, analysis, and visualization\"\ncalls_sf &lt;- st_as_sf(data_911, coords = c(\"Longitude\", \"Latitude\"), crs = 4326, remove = FALSE)\n\n#Transform zipcode data to match 911 data\nzipcode_json &lt;- st_transform(zipcode_json, st_crs(calls_sf))\n\n# Join call data and zipcode data together \ncalls_sf &lt;- st_intersection(calls_sf, zipcode_json %&gt;% select(zcta5ce10))\n\n# Clean census data, change CRS and pivot\ncensus_clean &lt;- census_data %&gt;%\n  select(GEOID, variable, estimate, GEOID) %&gt;%\n  pivot_wider(names_from = variable, values_from = estimate)\n\n\n\n\nStep 3: Define Mental Health Categories and assign them to the call data\n\n\nCode\n# Categories given by PPG Buffalo \n\nmental_health_desc &lt;- c(\"LOUD NOISE\", \"NEIGHBOR TROUBLE\",\"TRESPASSING\",\"CUSTOMER TROUBLE\",\n\"DOMESTIC TROUBLE\",\"CHECK WELFARE\",\"UNWELCOME GUEST\",\"DRUNK\",\"NARCOTICS\",\"MISCELLANEOUS\",\n\"ASSIST CITIZEN\",\"PERSON SOLICITING\", \"JUVENILE TROUBLE\",\"PROPERTY DISPUTE\",\"MOTORIST STRANDED\",\"LANDLORD TROUBLE\",\"SUICIDE ATTEMPT\",\"PERSON DOWN\",\"PERSON SCREAMING\",\"JUVENILE FOUND\",\"INDECENT EXPOSURE\",\"LABOR DISPUTE\",\"PROSTITUTION\",\"GAMBLING\" )\n\n# Create a new dataset with only mental health descriptors\nmental_health_data &lt;- calls_sf %&gt;%\n  filter( DESCRIPTIO %in% mental_health_desc ) %&gt;%\n  rename(\n    description = DESCRIPTIO,\n    date = DATEREPORT,\n    full_address = Buff_remov,\n    street_name = STRNAME,\n    zipcode = zcta5ce10\n  )\n\n# Preview of data\nhead(mental_health_data)\n\n# Make a color palette with this data for cohesive info\n#pal_vec &lt;- setNames(viridis(length(mental_health_desc)), mental_health_desc)\n\n\n\n\nStep 4: Create a summary table of the call data.\n\n\nCode\n# Count each description and order by frequency\nsummary_table_desc &lt;- mental_health_data %&gt;%\n  count(description, sort = FALSE) %&gt;%   # counts and sorts descending by n\n  rename(Frequency = n)\n\n# Count each zipcode and order by frequency\nsummary_table_zip &lt;- mental_health_data %&gt;%\n  count(zipcode, sort = TRUE) %&gt;%   # count how many times each ZIP appears\n  rename(Frequency = n)\n\n\n\n\nStep 5: Create a summary of call & zipcode frequencies\n\n\nCode\n# ggplot of the call frequency and description\ndescr_freq_bar &lt;- ggplot(summary_table_desc, aes(x = factor(description), y = Frequency)) + \n  geom_bar(stat = \"identity\", fill = \"steelblue\") + \n  labs(\n    title = \"Frequency of Mental Health Calls in Buffalo, New York\",\n    caption = \"March to April of 2024\",\n    x = \"Call Description\",\n    y = \"Frequency\"\n  ) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))\n\n# ggplot of the zipcode frequency and description\nzipcode_freq_bar &lt;- ggplot(summary_table_zip, aes(x = factor(zipcode), y = Frequency)) + \n  geom_bar(stat = \"identity\", fill = \"steelblue\") + \n  labs(\n    title = \"Frequency of Mental Health Calls per Zipcode in Buffalo, New York\",\n    caption = \"March to April of 2024\",\n    x = \"Zipcode\",\n    y = \"Frequency\"\n  ) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))\n\n\n\n\nStep 6: Map most frequent call types by zipcode\n\n\nCode\n# Top call and description \ntop_calls &lt;- mental_health_data %&gt;%\n  st_drop_geometry() %&gt;%\n  group_by(zipcode, description) %&gt;%\n  summarise(n = n(), .groups = \"drop_last\") %&gt;%\n  slice_max(order_by = n, n = 1, with_ties = FALSE)\n\n# Join back for geometry zip data \ntop_calls_zip &lt;- zipcode_json %&gt;%\n  left_join(top_calls, by = c(\"zcta5ce10\" = \"zipcode\")) %&gt;%\n  select(zcta5ce10, n, description)\n\ncall_type_map &lt;- ggplot() +\n  geom_sf(data = top_calls_zip, aes(fill = description), color = \"black\") +\n  scale_fill_viridis_d(option = \"C\") +\n  labs(\n    title = \"Most Frequent Mental Health 911 Calls by ZIP Code (Mar–Apr 2024)\",\n    caption = \"City of Buffalo | Data: Erie County 911\"\n  ) +\n  theme_minimal()\n\n\n\n\nStep 7: Map call volume by zip code\n\n\nCode\n# Frequency call \nfreq_calls_zip &lt;- summary_table_zip %&gt;%\n  st_drop_geometry() %&gt;%\n  group_by(zipcode)%&gt;%\n  select(zipcode, Frequency)\n\n# Join zip data and geometry\nfreq_calls_zip &lt;- zipcode_json %&gt;%\n  left_join(freq_calls_zip, by = c(\"zcta5ce10\" = \"zipcode\"))\n\n# Define color palette\npal &lt;- colorNumeric(\"viridis\", domain = freq_calls_zip$Frequency)\n\n# Create map\ncall_frequency_map &lt;- leaflet(freq_calls_zip) %&gt;%\n  addTiles() %&gt;%  # default basemap\n  addPolygons(\n    fillColor = ~pal(Frequency),\n    color = \"black\",\n    weight = 1,\n    fillOpacity = 0.8,\n    label = ~paste(\"ZIP:\", zcta5ce10, \"Freq:\", Frequency),\n    highlight = highlightOptions(weight = 2, color = \"white\", bringToFront = TRUE)\n  ) %&gt;%\n  addLegend(\n    pal = pal,\n    values = ~Frequency,\n    title = \"Call Frequency\"\n  )\n\n\n\n\nStep 8: Create and run a regression model on call frequency vs median income\n\n\nCode\n# Drop geometry on zip summary data\nzip_frequency &lt;- summary_table_zip %&gt;%\n  st_drop_geometry() %&gt;%\n  group_by(zipcode)\n\n# Drop geometry on census data\ncensus_drop &lt;- census_clean %&gt;%\n  st_drop_geometry()\n\n# Merge with census data\nzip_data &lt;- zipcode_json %&gt;%\n  left_join(zip_frequency, by = c(\"zcta5ce10\" = \"zipcode\")) %&gt;%\n  left_join(census_drop, by = c(\"geoid10\" = \"GEOID\")) %&gt;%\n  mutate(Frequency = replace_na(Frequency, 0))\n  \n# Run simple regression model\nmodel &lt;- lm(Frequency ~ median_income, data = zip_data)\nsummary(model)\n\n\n\nCall:\nlm(formula = Frequency ~ median_income, data = zip_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-589.55 -212.14  -48.58  212.54 1002.01 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    1.219e+03  2.728e+02   4.470 0.000296 ***\nmedian_income -1.222e-02  5.057e-03  -2.416 0.026558 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 347 on 18 degrees of freedom\nMultiple R-squared:  0.2448,    Adjusted R-squared:  0.2029 \nF-statistic: 5.835 on 1 and 18 DF,  p-value: 0.02656\n\n\nCode\n# Run simple regression model + total_pop\nmodel2 &lt;- lm(Frequency ~ median_income + total_pop, data = zip_data)\nsummary(model2)\n\n\n\nCall:\nlm(formula = Frequency ~ median_income + total_pop, data = zip_data)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-668.6 -102.6   56.1  131.2  512.0 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   990.279144 249.001529   3.977 0.000975 ***\nmedian_income  -0.014845   0.004451  -3.336 0.003917 ** \ntotal_pop       0.019456   0.007157   2.718 0.014604 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 298.1 on 17 degrees of freedom\nMultiple R-squared:  0.4736,    Adjusted R-squared:  0.4117 \nF-statistic: 7.648 on 2 and 17 DF,  p-value: 0.004276\n\n\n\n\nStep 9: Plot Regression\n\n\nCode\n# Visualize\nregression_plot &lt;- ggplot(zip_data, aes(x = median_income, y = Frequency)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = TRUE, color = \"blue\") +\n  labs(\n    title = \"Relationship Between 911 Call Volume and Median Household Income\",\n    x = \"Median Household Income ($)\",\n    y = \"Total 911 Calls\"\n  ) +\n  theme_minimal()\n\n# Visualize\n#ggplot(zip_data, aes(x = median_income, y = Frequency, color = total_pop)) +\n#  geom_point(size = 3, alpha = 0.8) +\n#  scale_color_viridis_c(option = \"C\") +\n#  geom_smooth(method = \"lm\", se = TRUE, color = \"black\") +\n#  labs(\n#    title = \"911 Calls vs Median Income (colored by Population)\",\n#    x = \"Median Household Income ($)\",\n#    y = \"Total 911 Calls\",\n#    color = \"Total Population\"\n#  ) +\n#  theme_minimal()\n\n\n\n\nStep 10: Spatial regression\n\n\nCode\n# Create normalization data for every 1000 people\nzip_data &lt;- zip_data %&gt;%\n  mutate(calls_per_1000 = (Frequency / total_pop) * 1000)\n\n# Palette creation for color\npal &lt;- colorNumeric(\"viridis\", domain = zip_data$calls_per_1000)\n\n# Normalize\nnormalize_map &lt;- leaflet(zip_data) %&gt;%\n  addProviderTiles(\"CartoDB.Positron\") %&gt;%\n  addPolygons(\n    fillColor = ~pal(calls_per_1000),\n    color = \"black\",\n    weight = 1,\n    fillOpacity = 0.8,\n    label = ~paste0(\n      \"&lt;strong&gt;ZIP: &lt;/strong&gt;\", zcta5ce10, \"&lt;br&gt;\",\n      \"&lt;strong&gt;Calls per 1,000: &lt;/strong&gt;\", round(calls_per_1000, 2), \"&lt;br&gt;\",\n      \"&lt;strong&gt;Population: &lt;/strong&gt;\", total_pop\n    ) %&gt;% lapply(htmltools::HTML)\n  ) %&gt;%\n  addLegend(pal = pal, values = ~calls_per_1000, title = \"Calls per 1,000 Residents\")\n\n\n\n\n\nResults\n[~200 words]\nTables and figures (maps and other graphics) are carefully planned to convey the results of your analysis. Intense exploration and evidence of many trials and failures. The author looked at the data in many different ways before coming to the final presentation of the data.\nShow tables, plots, etc. and describe them.\n\n\nCode\ndescr_freq_bar\n\n\n\n\n\nMap of completely random data\n\n\n\n\nCode\ncall_type_map\n\n\n\n\n\nMap of completely random data\n\n\n\n\nCode\nzipcode_freq_bar\n\n\n\n\n\nMap of completely random data\n\n\n\n\nCode\ncall_frequency_map\n\n\n\n\nMap of completely random data\n\n\nCode\nnormalize_map\n\n\n\n\nMap of completely random data\n\n\nCode\nregression_plot\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\nMap of completely random data\n\n\n\n\n\nDygraphs Example\n\n\n\nConclusions\n[~200 words]\nClear summary adequately describing the results and putting them in context. Discussion of further questions and ways to continue investigation.\n\n\nReferences\nAll sources are cited in a consistent manner"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  }
]